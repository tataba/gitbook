# 10.其他文件格式

### 10.1  控制器参数配置文件

| 参数             | 数据长度 | 默认值   | 描述                                                         |
| ---------------- | -------- | -------- | ------------------------------------------------------------ |
| FileType         | 1        | 0x01     | 文件类型                                                     |
| FileName         | 4        | CXXX     | 文件名XXX为文件编号，从0开始文件名为字符串，发送按顺序发送，如“C123”则先发送‘C’，最后发送‘3’。 |
| FileLen          | 4        |          | 文件长度                                                     |
| ControlName      | 8        | LEDCON01 | 控制器名称,控制器名为字符串，发送时按先后顺序发送            |
| Address          | 2        | 0x0001   | 控制器地址,控制器出厂默认地址为0x0001(0x0000地址将保留),控制除了对发送给自身地址的数据包进行处理外，还需对广播数据包进行处理。在PHY层，广播地址定义如下：0xffff为广播地址1，此种模式下，控制器不返回数据，其可用于广播校时等命令。0xfffe为广播地址2，此种模式主要用于广播设置屏参，控制器需返回数据。在返回的数据帧中，地址也应为0xfffe |
| Baudrate         | 1        | 0x00     | 波特率,0x00 – 保持原有波特率不变,0x01 – 强制设置为9600,0x02 – 强制设置为57600,0x03 – 强制设置为2400，0x04 – 强制设置为 4800，0x05 – 强制设置为 19200，0x06 – 强制设置为 115200 |
| ScreenWith       | 2        |          | 屏幕宽度                                                     |
| ScreenHeight     | 2        |          | 屏幕高度                                                     |
| Color            | 1        |          | 显示屏颜色定义，单色时为1，双色时为3，三色时为7              |
| MirrorMode       | 1        | 0        | 镜像属性,0x00 ——无镜像,0x01 ——镜像                           |
| OE               | 1        |          | OE极性,0x00 ——OE低有效,0x01—— OE高有效                       |
| DA               | 1        |          | 数据极性,0x00 ——数据低有效,0x01 ——数据高有效                 |
| RowOrder         | 1        |          | 行顺序                                                       |
| FreqPar          | 1        |          | CLK分频倍数                                                  |
| OEWidth          | 1        |          | OE宽度                                                       |
| OEAngle          | 1        |          | OE提前角                                                     |
| FaultProcessMode | 1        | 0        | 控制器的错误处理模式,0x00–自动处理,0x01–手动处理(此模式仅供调试人员使用) |
| CommTimeout      | 1        | 0x02     | 通讯超时时间，单位秒,串口—2秒,GPRS—30秒                      |
| RunMode          | 1        | 0        | 控制器运行模式,0x00 – 正常模式，,0x01 – 调试模式，输出信息到终端 |
| LogMode          | 1        |          | 日志模式,0x00–无日志,0x01–记录控制器错误,0x02–记录控制器错误和上位机对控制器的所有操作 |
| TipLanguage      | 1        | 0x00     | 0 表示上位机软件是中文版，底层固件在显示提示信息时需调用内置的中文提示信息；1 表示上位机软件是英文版，底层固件在显示提示信息时需调用内置的英文提示信息；255表示上位机软件是其他语言版，底层固件在显示提示信息时需调用自定义提示信息； |
| LatticeMode      | 1        | 0x00     | 点阵模式，0:R+G模式；1：G+R模式                              |
| Reverse          | 6        | 0x00     | 保留                                                         |
| CHK              | 2        |          | 整个文件的 CRC16 校验值                                      |



### 10.2  字库文件

| 参数                            | 数据长度 | 默认值 | 描述                                                         |
| ------------------------------- | -------- | ------ | ------------------------------------------------------------ |
| FileType                        | 1        | 0x04   | 文件类型                                                     |
| FileName                        | 4        | OXXX   | 文件名第一个字节O为中英文字库标志，定义：E——英文字库；O——中文字库；K——其余外文为后面三个字节（XXX）为文件编号，ASCII码表示文件名为字符串，发送按顺序发送，如“F123”则先发送‘F’，最后发送‘3’。 |
| FileLen                         | 4        |        | 文件长度                                                     |
| FontWidth                       | 1        |        | 字体宽度                                                     |
| FontHeight                      | 1        |        | 字体高度                                                     |
| LibData                         | N        |        | 标准的字库数据格式                                           |
| Language CRC                    | 2        |        | 字库N从Extended parameter length到 Revolving font 这10个参数的CRC校验，用于分辨新旧命令 |
| Revolving font                  | 1        | 0x00   | 字库N字体是否旋转，没有旋转为0x00，顺时针旋转90°为0x01，顺时针旋转180°为0x02，顺时针旋转270°为0x03 |
| Font tilt                       | 1        | 0x00   | 字库N字体外形，0x00表示常规，0x01表示倾斜                    |
| Font bold                       | 1        | 0x00   | 字库N字体外形，0x00表示常规，0x01表示加粗                    |
| Underline                       | 1        | 0x00   | 字库N下划线，0x00表示没有下划线，0x01表示有下划线            |
| Font file format version number | 1        | 0x01   | 字库N字库文件版本号 .0x00为老固件，0x01为新固件              |
| Language type                   | 1        |        | 字库N语言类型，英文为0，中文为1，韩文为2，法语为3，德语为4，俄语为5，日语为6，越语为7，剩余部分待添加 |
| Font type                       | 2        |        | 字库N字体类型，宋体为0（0x0000），楷体为1（0x0001），黑体为2（0x0002），仿宋为3（0x0003），微软雅黑为4（0x0004）,后续支持其他的，上位机定义好告知后增加 |
| LibData length                  | 4        |        | 字库N字库点阵文件的长度                                      |
| Font file generation time       | 8        |        | 字库N文件生成时间                                            |
| Extended parameter length       | 1        | 0x12   | 字库N扩展参数长度，以字节为单位，决定扩展参数个数            |
| FontEncode                      | 1        | 0x00   | 字库编码格式。0x01：GB2312编码,0x02：GBK编码,英文字库使用默认值 0x00 |
| CHK                             | 2        |        | 整个文件的 CRC16 校验值                                      |

### 10.3  图库文件

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| FileType | 1        | 0x04   | 文件类型                                                     |
| FileName | 4        | TXXX   | 文件名XXX为文件编号，ASCII码表示文件名为字符串，发送按顺序发送，如“T123”则先发送‘T’，最后发送‘3’。 |
| FileLen  | 4        |        | 文件长度                                                     |
| LibData  | N        |        | 图库数据，参考 bitmap structure V1.1.doc 文档                |
| CHK      | 2        |        | 整个文件的 CRC16 校验值                                      |