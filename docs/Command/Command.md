# 8.命令定义

### 8.1  发送节目文件
#### 8.1.1 开始写文件

| 参数       | header 2 | 默认值 | 描述                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup   | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd        | 1        | 0x05   | 命令编号。                                                   |
| Response   | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved   | 2        | 0      | 保留。                                                       |
| OverWrite  | 1        |        | 文件覆盖方式：0x00——若文件系统中已经存在该文件，则不再下发该文件，返回 ERR_FILE_EXIST状态。0x01——若文件系统中已经存在该文件，则直接覆盖该文件。 |
| FileName   | 4        |        | 文件名，参考节目文件格式。                                   |
| FileLength | 4        |        | 文件长度，参考节目文件格式。                                 |
控制器接收到开始写文件命令后，首先检查文件系统剩余容量，若剩余容量不足，则返回ERR_MEMORYVOLUME 状态。返回值为 ACK 或 NACK。

#### 示例：

卡型号6K3,128**32屏，手动换行，多行显示，显示内容：“欢迎光临Onbon”，字体大小中文16X16，英文8*16

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 00 00 00 00 00 00 FE 02 0E 00 **A1 05 01 00 00 01 50 30 30 30 47 00 00 00** 48 14 5A

| 参数           | 数据        | 描述                   |
| -------------- | ----------- | ---------------------- |
| 命令分组       | A1          | 动态区更新命令         |
| 命令编号       | 05          | 动态区更新命令         |
| 控制器是否回复 | 01          | 必需要回复             |
| 保留字节       | 00 00       | 2个保留字节            |
| 文件覆盖方式   | 01          | 如果已经存在，直接覆盖 |
| 文件名         | 50 30 30 30 | 节目名P001             |
| 文件长度       | 00 00 00 47 | 文件长度               |


#### 8.1.2 写文件
在发送该命令前请先发送开始写文件命令，以判断是否有足够空间存储该文件。该命令用于发送文件数据到控制器，如果文件大小不超出控制器接收缓冲区(1024Byte)的大小，可以单包发送。如果已经超出接收缓冲区(1024Byte)大小，则必须分包发送，分包大小可以自行定义。


| 参数          | 数据长度 | 默认值 | 描述                                                         |
| ------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup      | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd           | 1        | 0x06   | 命令编号。                                                   |
| Response      | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved      | 2        | 0      | 保留。                                                       |
| FileName      | 4        |        | 文件名，参考节目文件格式。                                   |
| LastBlockFlag | 1        | 0x00   | 用于标志是否最后一包，0x00——不是最后一包，0x01——最后一包。   |
| BlockNum      | 2        |        | 包号，如果是单包发送，则默认为 0x00。                        |
| BlockLen      | 2        |        | 包长，若是单包发送，此处为文件长度。                         |
| BlockAddr     | 4        |        | 本包数据在文件中的起始位置，如果是单包发送，此处默认为 0。   |
| Data          | N        |        | 文件包数据，参考节目文件格式。                               |

控制器接收玩最后一个Block后，需对整个文件进行CRC16校验，如校验错误则返回ERR_FILE_CRC16错误。控制器接收完一个文件后，如校验出现错误(ERR_FILE_CRC16,ERR_FIRMWARE_TYPE)，控制器需自动删除此文件。如 BlockAddr 出错，即 BlockAddr 不连续则返回ERR_FILE_BLOCK_NUM 错误状态和即将要写的块地址。返回值为：

| 参数      | 数据长度 | 默认值 | 描述                                                         |
| --------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup  | 1        | 0xA1   | 命令分组编号。                                               |
| Cmd       | 1        | 0x06   | 命令编号。                                                   |
| CmdError  | 1        |        | 命令处理状态。                                               |
| Reserved  | 2        | 0      | 保留。                                                       |
| BlockAddr | 4        |        | 包地址，如果当前包成功接收则返回下一包的文件地址，否则返回当前包的文件地址。 |
#### 示例：

卡型号6K3,128X32屏，手动换行，多行显示，显示内容：“欢迎光临Onbon”，字体大小中文16X16，英文8X16

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 00 00 00 00 00 00 FE 02 59 00 **A1 06 01 00 00 50 30 30 30 01 00 00 47 00 00 00 00 00 00 50 30 30 30 47 00 00 00 FF 00 00 01 FF FF FF FF FF FF FF FF 01 00 00 01 2C 00 00 00 00 00 80 00 00 80 80 20 00 FF 00 00 00 00 00 00 00 02 02 02 00 0A 0A 0D 00 00 00 BB B6 D3 AD B9 E2 C1 D9 4F 6E 62 6F 6E 0F 18 EC F0** 5A

| 参数             | 数据                                         | 描述                              |
| ---------------- | -------------------------------------------- | --------------------------------- |
| 命令分组         | A1                                           | 动态区更新命令                    |
| 命令编号         | 06                                           | 动态区更新命令                    |
| 控制器是否回复   | 01                                           | 必需要回复                        |
| 保留字节         | 00 00                                        | 2个保留字节                       |
| 文件名           | 30303050                                     | 文件名                            |
| 是否最后一包     | 01                                           | 是否最后一包                      |
| 包号             | 00 00                                        | 包号                              |
| 包长             | 00 47                                        | 包长                              |
| X坐标            | 0000                                         | x轴坐标0                          |
| Y坐标            | 0000                                         | y轴坐标0                          |
| 文件类型         | 00                                           | 文件类型                          |
| 文件名           | 30303050                                     | 文件名                            |
| 文件长度         | 0047                                         | 文件长度                          |
| 节目优先级       | FF                                           | 节目优先级                        |
| 节目播放方式     | 0000                                         | 播放方式                          |
| 节目重复播放次数 | 00 01                                        | 播放次数                          |
| 节目生命周期     | FF FF FF FF FF FF FF FF                      | 生命周期                          |
| 节目星期属性     | 01                                           | 节目星期属性                      |
| 定时节目位       | 00                                           | 定时节目位                        |
| 节目播放时段组数 | 00                                           | 节目播放时段组数                  |
| 区域个数         | 01                                           | 区域个数                          |
| 区域数据长度     | 00 00 00 2C                                  | 区域数据长度                      |
| 区域类型         | 00                                           | 区域类型                          |
| X坐标            | 80 00                                        | 坐标0（高字节在前，像素点为单位） |
| Y坐标            | 00 00                                        | 坐标0                             |
| 区域宽度         | 80 80                                        | 区域宽度128，像素点为单位         |
| 区域高度         | 00 20                                        | 区域高度32，像素点为单位          |
| 区域编号         | FF                                           | 区域编号                          |
| 行间距           | 00                                           | 行间距                            |
| 区运行模式       | 00                                           | 区运行模式                        |
| 区超时时间       | 0000                                         | 超时时间                          |
| 是否使能语音     | 00                                           | 是否使能语音                      |
| 扩展位个数       | 00                                           | 扩展位个数                        |
| 字对齐           | 00                                           | 字对齐方式                        |
| 是否单行显示     | 02                                           | 多行显示                          |
| 是否自动换行     | 02                                           | 自动换行                          |
| 显示方式         | 02                                           | 显示方式                          |
| 退出方式         | 00                                           | 退出方式                          |
| 显示速度         | 0A                                           | 显示速度                          |
| 停留时间         | 0A                                           | 停留时间                          |
| 显示数据长度     | 0D 00 00 00                                  | 显示数据长度                      |
| 显示数据         | BB B6 D3 AD B9 E2 C1 D9 4F 6E 62 6F 6E 0F 18 | 欢迎光临Onbon                     |
| CRC校验          | EC F0                                        | CRC校验                           |
#### 8.1.3 写多文件命令

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd      | 1        | 0x07   | 命令编号。                                                   |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved | 2        | 0      | 保留。                                                       |
在连续发送多个文件时，可以先发送写多文件命令，此时屏幕关闭，等待接收文件，在所有文件发送完毕后发送结束写多文件命令。结束等待。
#### 8.1.4 结束写多文件命令

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd      | 1        | 0x08   | 命令编号。                                                   |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved | 2        | 0x00   | 保留。                                                       |
#### 8.1.5 写客户信息

| 参数      | 数据长度 | 默认值 | 描述                                                         |
| --------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup  | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd       | 1        | 0x09   | 命令编号。                                                   |
| Response  | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved  | 2        | 0x00   | 保留。                                                       |
| OverWrite | 1        |        | 文件覆盖方式：0x00——若文件系统中已经存在该文件，则不再下发该文件，返回 ERR_FILE_EXIST 状态。0x01——若文件系统中已经存在该文件，则直接覆盖该文件。 |
| ClientMsg | 16       |        | 客户信息用 16 个字符表示且全部用 ASCII 表示，如： XRY，前三个字符使用 ASCII，后面 13 个字符使用 NULL 的 ASCII |
#### 8.1.6读取文件信息命令

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd      | 1        | 0x0A   | 命令编号。                                                   |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved | 2        | 0x00   | 保留。                                                       |
| DataLen  | 2        | 0x04   | 数据长度                                                     |
| FileName | 4        |        | 文件名                                                       |
#### 8.1.7返回文件信息命令

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd      | 1        | 0x8A   | 命令编号。                                                   |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved | 2        | 0x00   | 保留。                                                       |
| DataLen  | 2        | 0x0C   | 文件长度                                                     |
| FileName | 4        |        | 文件名                                                       |
| FileSize | 4        |        | 文件长度                                                     |
| FileCrc  | 2        |        | 文件校验                                                     |
#### 8.1.8读取文件内容命令

| 参数        | 数据长度 | 默认值 | 描述                                                         |
| ----------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup    | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd         | 1        | 0x0B   | 命令编号。                                                   |
| Response    | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved    | 2        | 0x00   | 保留。                                                       |
| DataLen     | 2        | 0x08   | 文件长度                                                     |
| FileName    | 4        |        | 文件名                                                       |
| BlockOffset | 4        | 0x00   | 数据块偏移量                                                 |
#### 8.1.9返回文件内容命令

| 参数          | 数据长度 | 默认值 | 描述                                                         |
| ------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup      | 1        | 0XA1   | 命令分组编号。                                               |
| Cmd           | 1        | 0x8B   | 命令编号。                                                   |
| Response      | 1        | 0x00   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved      | 2        | 0x00   | 保留。                                                       |
| DataLen       | 2        | N+9    | 数据长度，加上的9个长度为LastBlockFlag+FileName+BlockOffset  |
| LastBlockFlag | 1        |        | 是否为最后一个Block                                          |
| FileName      | 4        |        | 文件名                                                       |
| BlockOffset   | 4        |        | 数据包偏移量                                                 |
| BlockData     | N        |        | 数据                                                         |
### 8.2  发送实时显示信息
####8.2.1发送实时显示区域数据
控制卡支持 5 个动态区，每个动态区数据量不能超过1024byte（5K为512，支持10个动态区），可以单独更新一个动态区，也可同时更新所有动态区。实时显示信息不能掉电保存，但可以无限次更新。

| 参数          | 数据长度 | 默认值 | 描述                                                         |
| ------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup      | 1        | 0XA3   | 命令分组编号                                                 |
| Cmd           | 1        | 0x06   | 命令编号                                                     |
| Response      | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复。 |
| ProcessMode   | 1        | 0x00   | 当该字节为 0 时，收到动态信息后不再进行清区域和初始化区域的操作，当该字节为 1 时，收到动态信息后需要进行清区域和初始化区域的操作。 |
| Reserved      | 1        | 0x00   | 保留                                                         |
| DeleteAreaNum | 1        |        | 要删除的区域个数。注意：如果该值为0xFF，则删除所有动态区数据。如果该值为 0x00，则不删除区域。 |
| DeleteAreaId  | N        |        | 需要删除的区域ID号，如果要删除的区域个数（DeleteAreaNum）为 0，则该项不发送（N=0）。 |
| AreaNum       | 1        |        | 区域个数，本次更新的区域个数。                               |
| AreaDataLen0  | 2        |        | 区域 0 数据长度                                              |
| AreaData0     | N        |        | 区域 0 数据，其数据格式请参考区域数据格式（9.1节）           |
| ｜            | ｜       | ｜     | ｜                                                           |
| AreaDataLenN  | 2        |        | 区域N数据长度                                                |
| AreaDataN     | N        |        | 区域 N 数据，其数据格式请参考区域数据格式（9.1节）           |
返回 ACK 或 NACK。

#### 示例：

卡型号6K3,128*32屏，手动换行，多行显示，显示内容：“欢迎光临”，字体大小16X16

a5 a5 a5 a5 a5 a5 a5 a5 fe ff 00 80 00 00 00 00 00 00 fe 02 2c 00 **a3 06 01 00 00 00 01 23 00 00 00 80 00 00 80 80 20 00 00 00 00 0a 00 00 00 00 02 01 01 00 02 0a 08 00 00 00 bb b6 d3 ad b9 e2 c1 d9 3c** 49 5a

| 参数           | 数据                    | 描述                        |
| -------------- | ----------------------- | --------------------------- |
| 命令分组       | A3                      | 动态区更新命令              |
| 命令编号       | 06                      | 动态区更新命令              |
| 控制器是否回复 | 01                      | 必需要回复                  |
| 保留字节       | 00 00                   | 2个保留字节                 |
| 删除区域个数   | 00                      | 删除区域                    |
| 更新区域个数   | 01                      | 更新区域                    |
| 区域数据长度   | 00 23                   | 区域数据长度                |
| 区域类型       | 00                      | 区域类型                    |
| X坐标          | 8000                    | x轴坐标0（像素为单位）      |
| Y坐标          | 0000                    | y轴坐标0（像素为单位）      |
| 区域宽度       | 8080                    | 区域宽度为128（像素为单位） |
| 区域高度       | 0020                    | 区域高度为32（像素为单位）  |
| 动态区编号     | 00                      | 动态区编号0                 |
| 行间距         | 00                      | 行间距为0                   |
| 动态区运行模式 | 00                      | 普通模式                    |
| 动态区超时时间 | 00 0A                   | 超时时间10秒                |
| 是否使能语音   | 00                      | 不使能                      |
| 扩展位个数     | 00                      | 扩展位个数                  |
| 字体对齐方式   | 00                      | 左对齐                      |
| 是否单行显示   | 02                      | 多行显示                    |
| 是否自动换行   | 01                      | 手动换行                    |
| 显示方式       | 01                      | 静止显示                    |
| 退出方式       | 00                      | 自动循环显示                |
| 显示速度       | 02                      | 速度02                      |
| 停留时间       | 0A                      | 停留时间10秒                |
| 显示数据长度   | 00000008                | 数据长度8个字节             |
| 显示数据       | BB B6 D3 AD B9 E2 C1 D9 | 显示内容为欢迎光临          |
### 8.3 BX-5K2 、BX-5MK 专属命令
#### 8.3.1 设置特殊应用动态区
控制器只支持一个特殊应用动态区，该区支持点阵和编码两种数据类型，当数据类型配置为编码格式时，区域支持数据分页循环播放和单独更新某页数据；当配置为点阵格式时，区域只支持数据单页显示，如果点阵信息大于1024byte，则必须分包发送。该区域的数据容量为16Kbyte(8192 个汉字)。

| 参数        | 数据长度 | 默认值 | 描述                                                         |
| ----------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup    | 1        | 0xA4   | 命令分组编号                                                 |
| Cmd         | 1        | 0x01   | 命令编号                                                     |
| Response    | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved    | 2        | 0      | 保留                                                         |
| AreaX       | 2        |        | 区域 X 坐标，以字节(8 个像素点)为单位                        |
| AreaY       | 2        |        | 区域 Y 坐标，以像素点为单位                                  |
| AreaW       | 2        |        | 区域宽度，以字节(8 个像素点)为单位                           |
| AreaH       | 2        |        | 区域高度，以像素点为单位                                     |
| DataType    | 1        |        | 数据类型,0— 编码格式,1— 点阵格式                             |
| Pagetotal   | 1        | 0      | 区域数据总页数,注意，数据类型为点阵格式时总页数强制为 0。    |
| RunState    | 1        |        | 动态区运行模式,0—动态区数据循环显示。1—动态区数据显示完成后静止显示最后一页数据。2—动态区数据循环显示，超过设定时间后数据仍未更新时删除动态区信息。 |
| Timeout     | 2        |        | 动态区数据超时时间，单位为秒                                 |
| SingleLine  | 1        | 0x02   | 是否单行显示,0x01——单行显示,0x02——多行显示,注意，点阵格式下该参数无效，默认为 0。 |
| Lines_sizes | 1        |        | 行间距,注意，点阵格式下该参数无效，默认为 0。                |
| NewLine     | 1        |        | 是否自动换行,0x01——不自动换行，显示数据在换行时必须插入换行符。0x02——自动换行，显示内容不需要换行符，但是只能使用统一的中文字体和英文字体注意，点阵格式下该参数无效，默认为 0。 |
| StayTime    | 2        |        | 显示停留时间，单位为0.5s注意，点阵格式下该参数无效，默认为 0。 |
| Reserved    | 6        | 0      | 保留值                                                       |
返回 ACK 或 NACK。

实例：
A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 1D 00 A4 01 01 00 00 28 00 00 00 08 00 40 00 00 01 00 02 00 02 00 02 0A 00 00 00 00 00 00 00 FD C0 5A

#### 8.3.2 发送分页数据
当动态区数据类型配置为编码类型时，选择该命令更新页数据。每页数据大小为（16kbyte）除以总页数且不能大于 1024byte。循环播放每页数据。

| 参数        | header 2 | header 2 | header 2                                                     |
| ----------- | -------- | -------- | ------------------------------------------------------------ |
| CmdGroup    | 1        | 0XA4     | 命令分组编号                                                 |
| Cmd         | 1        | 0x02     | 命令编号                                                     |
| Response    | 1        | 0x01     | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复。 |
| Reserved    | 2        | 0        | 保留                                                         |
| PageNum     | 1        |          | 页号，页号从 0 开始递增，不能大于总页数。                    |
| PageDataLen | 2        |          | 页数据长度                                                   |
| PageData    | N        |          | 页数据，参考图文内容编辑                                     |
返回 ACK 或 NACK。

实例：（数据为 www.onbonbx.com）

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 17 00 A4 02 01 00 00 00 0F 00 77 77 77 2E 6F 6E 62 6F 6E 62 78 2E 63 6F 6D 68 B5 5A
#### 8.3.3 删除页数据
如果特殊应用动态区使用分页显示数据的方式，则可以使用删除页数据来单独删除某一页数据。

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA4   | 命令分组编号                                                 |
| Cmd      | 1        | 0x09   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
| PageLog  | 1        |        | 需要删除的页号                                               |
返回 ACK 或 NACK。

实例：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 06 00 A4 09 01 00 00 00 65 9C 5A
#### 8.3.4 发送点阵信息
当动态区数据类型配置为点阵类型时，选择该命令更新页数据。点阵信息长度不能大于 16Kbyte，大于1024byte时必须分包发送。接收信息时，屏幕静止显示之前数据。点阵信息需用户自己生成。

| 参数      | 数据长度 | 默认值 | 描述                                                         |
| --------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup  | 1        | 0XA4   | 命令分组编号                                                 |
| Cmd       | 1        | 0x03   | 命令编号                                                     |
| Response  | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved  | 2        | 0      | 保留                                                         |
| BlockFlag | 1        | 0      | 是否最后一包，0— 不是最后一包，1— 最后一包                   |
| BlockAddr | 2        |        | 包地址，即把点阵信息分成若干包后每包的基址                   |
| BlockData | N        |        | 包数据，点阵信息分割而得                                     |
返回 ACK 或 NACK。

实例：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 08 02 A4 03 01 00 00 01 00 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FD 00 FF 00 FF 00 FC 00 FF 00 80 00 3F 00 FF 00 F0 00 07 00 FF 00 FE 00 7F 00 02 02 FF 80 FF 00 E0 00 00 00 7F 00 FF 00 9F 00 29 28 FF 00 FF 00 C0 00 02 00 7F 00 FF 00 CF 00 03 00 FF 00 FF 00 80 00 0E 00 7F 00 FF 00 E7 00 28 28 3F 00 FF 00 00 00 18 18 3F 00 FF 00 F0 00 00 00 7F 00 FE 00 FF EF F8 F8 3F 00 FF 00 FC 00 01 00 FF 00 FF 01 FE FF F8 F8 3F 00 FF 00 F8 00 03 00 FF 00 FF 01 FF FF F8 E8 7F 00 FF 00 F0 00 1F 00 FF 00 FE 00 1F 1F F0 F0 FF 00 FF 00 C0 00 8D 00 FF 00 FC 00 01 01 D0 D0 FF 00 FC 00 01 00 C7 00 FF 00 FC 00 00 00 01 00 FF 00 FC 00 61 00 A7 00 FF 00 FC 00 60 00 01 00 FF 00 FC 00 EF 20 FD 00 FF 00 FC 00 E0 00 03 00 FF 00 FD 01 8F 00 F7 00 FF 00 FC 00 85 00 07 00 FF 00 FC 00 0F 00 FF 00 FF 00 FC 00 07 00 9F 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 F5 00 9F 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FD 08 9F 80 FF 00 FF 00 F2 02 CF 00 FF 00 FF 00 F8 08 9F 80 FF 00 FF 00 FF 0F 57 50 FF 00 FF 00 FF 00 FF 80 FF 00 FF 00 FF 00 DF C0 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 EF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 DF 00 DF 00 DB 02 FF 00 FF 00 FF 00 FF 00 FF 00 C8 00 52 52 52 12 BF 80 FF 00 FF 00 FF 00 FF 00 DA 1A DB DB 52 52 C3 80 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 2E 8B 5A
#### 8.3.5 删除特殊应用动态区
该命令只有 BX-5MK 支持，其他控制器不支持该命令。

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA4   | 命令分组编号                                                 |
| Cmd      | 1        | 0x04   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
返回 ACK 或 NACK。

实例：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 05 00 A4 04 01 00 00 E1 C8 5A
#### 8.3.6 设置IP地址
TCP 端口号，默认值为 5005，UDP端口号为5007。BX-5MK系列只支持单机直连和固定 IP 模式。

| 参数                   | 数据长度               | 默认值                 | 描述                                                         |
| ---------------------- | ---------------------- | ---------------------- | ------------------------------------------------------------ |
| CmdGroup               | 1                      | 0XA4                   | 命令分组编号                                                 |
| Cmd                    | 1                      | 0x05                   | 命令编号                                                     |
| Response               | 1                      | 0x01                   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved               | 2                      | 0                      | 保留                                                         |
| ConnnectMode           | 1                      |                        | 控制器连接模式：0x00–单机直连（PC与控制器直接连接），0x01 – 自动获取 IP（DHCP），0x02 – 手动设置 IP（Static IP），0x03 – 服务器模式（动态 IP） |
| ↓Static IP Settings↓   | ↓Static IP Settings↓   | ↓Static IP Settings↓   | ↓Static IP Settings↓                                         |
| IPAddress              | 4                      |                        | IP 地址                                                      |
| SubnetMask             | 4                      |                        | 子网掩码                                                     |
| Gateway                | 4                      |                        | 默认网关                                                     |
| Port                   | 2                      |                        | 端口号                                                       |
| ↓Server Mode Settings↓ | ↓Server Mode Settings↓ | ↓Server Mode Settings↓ | ↓Server Mode Settings↓                                       |
| ServerMode             | 1                      |                        | 服务器模式是否使能，1 – 使能，0 – 禁止                       |
| ServerIPAddress        | 4                      |                        | 服务器 IP 地址                                               |
| ServerPort             | 2                      |                        | 服务器，端口号                                               |
| ServerAccessPassword   | 8                      |                        | 服务器访问密码                                               |
| HeartBeatInterval      | 2                      |                        | 心跳时间间隔（单位：秒）                                     |
| NetID                  | 12                     |                        | 控制器网络 ID                                                |
实例：

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 00 00 00 00 00 00 FE 02 31 00 A4 05 01 00 00 02 C0 A8 00 EB FF FF FF 00 C0 A8 00 01 8D 13 00 C0 A8 00 01 71 17 30 30 30 30 30 30 30 30 14 00 42 58 2D 4E 45 54 30 30 30 30 30 16 90 5A
#### 8.3.7 设置MAC地址

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA4   | 命令分组编号                                                 |
| Cmd      | 1        | 0x06   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复。 |
| Reserved | 2        | 0      | 保留                                                         |
| MAC      | 6        |        | 控制器MAC地址                                                |
实例：

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 00 00 00 00 00 00 FE 02 0B 00 A4 06 01 00 00 00 FF FE 83 A8 56 1C 2C 5A
#### 8.3.8 网络搜索
返回网络心跳。
| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA4   | 命令分组编号                                                 |
| Cmd      | 1        | 0x07   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
#### 8.3.9 网络心跳

| 参数       | 数据长度 | 默认值 | 描述                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup   | 1        | 0XA4   | 命令分组编号                                                 |
| Cmd        | 1        | 0x08   | 命令编号                                                     |
| Response   | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved   | 2        | 0      | 保留                                                         |
| Status     | 2        |        | 控制器状态                                                   |
| Error      | 2        |        | 错误状态寄存器                                               |
| IP         | 4        |        | 控制器 IP 地址                                               |
| SubNetMask | 4        |        | 子网掩码                                                     |
| Gate       | 4        |        | 网关                                                         |
| Port       | 2        |        | 端口号                                                       |
| Mac        | 6        |        | MAC地址                                                      |
| NetID      | 12       |        | 控制器网络 ID                                                |
### 8.4  查询控制器状态

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA1   | 命令分组编号                                                 |
| Cmd      | 1        | 0x02   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复若为广播通讯，此值固定为 0x02。即控制器不回复。 |
| Reserved | 2        |        | 数据长度                                                     |
命令回复：

| 参数            | 数据长度 | 默认值 | 描述                                                         |
| --------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup        | 1        | 0xA1   | 命令分组编号                                                 |
| Cmd             | 1        | 0x02   | 命令编号                                                     |
| CmdError        | 1        |        | 命令处理状态                                                 |
| Reserved        | 2        |        | 保留                                                         |
| OnOff           | 1        | 0x02   | 控制器开关机状态，0x01——开机，   0x02——关机                  |
| Brightness      | 1        |        | 控制器当前亮度                                               |
| SystemTime      | 8        |        | 控制器时间，格式如下（时间表示均采用BCD码）：年(2)+月(1)+日(1)+星期(1)+时(1)+分(1)+秒(1)注：1. 年采用两个字节表示，如 2011 年表示为0x20,0x11。2. 星期用 1~7 来表示，其中 7 表示星期日 |
| ProgramNUM      | 1        |        | 控制器中节目个数                                             |
| FileName        | 4        |        | 当前播放的节目文件名                                         |
| SpecialDynaArea | 1        |        | 特殊动态区标志(BX-5K1不支持此项)，0—不存在特殊动态区，1—存在特殊动态区 |
| PageNum         | 1        |        | 特殊动态区总页数，如果不存在特殊动态区，该项为0(BX-5K1不支持此项) |
| DynaAreaNum     | 1        |        | 动态区个数                                                   |
| DynaAreaID      | N        |        | 动态区 ID号，如果动态区个数为0，该项不发送。                 |

### 8.5格式化
| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA1   | 命令分组编号                                                 |
| Cmd      | 1        | 0x00   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复,0x01——控制器必须回复,0x02——控制器不必回复。 |
| Reserved | 2        | 0      | 保留                                                         |
格式化命令会删除控制器中的所有文件，包括节目文件和字库文件，如果只希望删除节目文件而保留字库文件，该命令需慎用。命令回复为 ACK 或 NACK。

实例：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 05 00 A1 00 01 00 00 2C F8 5A

### 8.6  删除文件

| 参数       | 数据长度 | 默认值 | 描述                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup   | 1        | 0XA1   | 命令分组编号                                                 |
| Cmd        | 1        | 0x01   | 命令编号                                                     |
| Response   | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved   | 2        | 0      | 保留                                                         |
| FileNumber | 2        |        | 需要删除文件总数，如果该值为0则删除所有节目文件，后面的文件名数据不发送。 |
| FileName1  | 4        |        | 文件名 1                                                     |
| FileName2  | 4        |        | 文件名 2                                                     |
| ↓↓↓↓↓      | ↓↓↓↓↓    | ↓↓↓↓↓  | ↓↓↓↓↓                                                        |
| FileNameN  | 4        |        | 文件名 N                                                     |
删除文件命令可以删除控制器中任意文件，包括节目文件和字库文件。如果需要删除所有的节目文件，则将 FileNumber 置为 0 即可。命令回复为 ACK 或 NACK。

### 8.7 PING 命令

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x00   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        |        | 保留                                                         |
返回值为 ACK 或 NACK。

PING 命令实例：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 05 00 A2 00 01 00 00 68 F8 5A

### 8.8  波特率自适应
对于当前的控制器，只支持9600bps和57600bps两种波特率。所以，对于波特率自适应，我们这里采用简单的轮询模式。其过程如下：
1. 上位机使用 9600 波特率向控制器发出 Ping 命令。
2. 如上位机在 2S 内收到正确的回复，则说明控制器的波特率即为 9600 。
3. 如上位机 2S 内没有收到正确的回复信息，则改用 57600 重复 a,b 。
4. 如上位机在 2S 内收到正确的回复，则说明控制器的波特率为 57600 。
5. 如上位机 2S 内没有收到正确的回复信息，则重复 a,b,c,d 。
6. 如 a,b,c,d 仍失败，则说明通讯失败，此时需提醒客户检查通讯线路。

### 8.9  系统复位命令

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x01   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
控制器接接收到系统复位命令后，擦除除Firmware文件外的所有数据文件，然后复位 CPU。命令返回ACK 或 NACK。

### 8.10  系统时间校正命令

| 参数       | 数据长度 | 默认值 | 描述                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup   | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd        | 1        | 0x03   | 命令编号                                                     |
| Response   | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved   | 2        | 0      | 保留                                                         |
| SystemTime | 8        | 8      | 控制器时间，发送顺序如下（时间表示均采用BCD码）：年(2)+月(1)+日(1) +时(1)+分(1)+秒(1) +星期(1)。注：年采用两个字节表示，如 2011 年表示为0x20,0x11。先发送低位字节，后发送高位字节。星期用 1~7 来表示，其中 7 表示星期日 |
返回 ACK 或 NACK。

校时命令实例：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 0D 00 A2 03 01 08 00 13 20 01 25 11 17 26 05 B0 3F 5A

### 8.11  设置屏 ID

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x06   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
| 保留     | 2        |        | 屏 ID，由两个字节组成，范围为 0x0000—0x7FFF                  |
返回 ACK 或 NACK。设置屏ID时必需采用广播模式（见包头数据格式中目标地址的说明）。
### 8.12  读取屏 ID

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x07   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
读取屏 ID 时必需采用广播模式（见包头数据格式中目标地址的说明）。

返回值：

| 参数     | 数据长度 | 默认值 | 描述         |
| -------- | -------- | ------ | ------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号 |
| Cmd      | 1        | 0x07   | 命令编号     |
| CmdError | 1        |        | 命令处理状态 |
| Reserved | 2        | 0      | 保留         |
| ScreenID | 2        |        | 屏 ID        |

### 8.13  强制开关机


| 参数      | 数据长度 | 默认值 | 描述                                                         |
| --------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup  | 1        | 0XA3   | 命令分组编号                                                 |
| Cmd       | 1        | 0x00   | 命令编号                                                     |
| Response  | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved  | 2        | 0      | 保留                                                         |
| OnOffFlag | 1        |        | 开关状态，0x01——开机，0x02——关机                             |
返回 ACK 或 NACK。强制开关机命令的优先级高于定时开关机。如果发送强制开机命令，则在下一个定时开关机关机时段前都为开机状态，如果发送强制关机命令，则在下一个定时开关机开机时段前都为关机状态。
### 8.14 定时开关机

| 参数         | 数据长度  | 默认值 | 描述                                                         |
| ------------ | --------- | ------ | ------------------------------------------------------------ |
| CmdGroup     | 1         | 0XA3   | 命令分组编号                                                 |
| Cmd          | 1         | 0x01   | 命令编号                                                     |
| Response     | 1         | 0x01   | 是否要求控制器回复。0x01——控制器必须回复，0x02——控制器不必回复 |
| Reserved     | 2         | 0      | 保留                                                         |
| TimerNum     | 1         |        | 定时器组数(最大只支持 3 组)                                  |
| Timer1On     | 2         |        | 第一组定时开机时间，BCD码表示，格式如下：时（1）+分（1）     |
| Timer1Off    | Timer1Off |        | 第一组定时关机时间，BCD码表示，格式如下：时（1）+分（1）     |
| ......       | ......    | ...... | ......                                                       |
| Timer(n) On  | 2         |        | 第n组定时关机时间，BCD码表示，格式如下：时（1）+分（1）      |
| Timer(n) Off | 2         |        | 第n组定时关机时间，BCD码表示，格式如下：时（1）+分（1）      |
返回 ACK 或 NACK。定时开关机一旦设置，则一直有效直到取消定时开关机为止。

注意！关机时间一定要比开机时间大，不支持跨天设置。时间的发送顺序为先发小时后发分钟
### 8.15  取消定时开关机

| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA3   | 命令分组编号                                                 |
| Cmd      | 1        | 0x08   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
返回 ACK 或 NACK。
### 8.16  设置亮度
该命令包含强制设置亮度和定时设置亮度功能。

| 参数              | 数据长度 | 默认值 | 描述                                                         |
| ----------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup          | 1        | 0XA3   | 命令分组编号                                                 |
| Cmd               | 1        | 0x02   | 命令编号                                                     |
| Response          | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved          | 2        | 0      | 保留                                                         |
| BrightnessType    | 1        |        | 亮度调节方式:0x01——强制调节亮度,0x02——定时调节亮度;注：若设置为强制调节方式，则 BrightnessValue 不必发送;若设置为定时调节方式，则 CurrentBrightness 默认为 0 |
| CurrentBrightness | 1        |        | 当前亮度，强制调节亮度时有效。亮度值为 0-15 共 16 级。亮度值为 15 时亮度最高 |
| BrightnessValue   | 48       |        | 亮度值列表，用于定时调亮,把一天分为48个时段，每 30 分钟为一个时段，此处 48 个字节为每个时段对应的亮度值 |
返回 ACK 或 NACK。
### 8.17  锁定 / 解锁节目
被锁定的节目将一直播放直至解锁，该命令常用于节目的的选择播放。
| 参数            | 数据长度 | 默认值 | 描述                                                         |
| --------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup        | 1        | 0XA3   | 命令分组编号                                                 |
| Cmd             | 1        | 0x04   | 命令编号                                                     |
| Response        | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved        | 2        | 0      | 保留                                                         |
| StoreMode       | 1        | 0x00   | 锁定状态保存方式：0x00——掉电不保存,0x01——掉电保存            |
| LockFlag        | 1        | 0x00   | 锁定状态:0x00——解锁状态,0x01——锁定状态                       |
| ProgramFileName | 4        |        | 节目文件名                                                   |
如果需锁定的节目不存在，则返回 ERR_FILENOTEXIST 错误状态，返回 ACK或NACK。
实例：
锁定节目：A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 0B 00 A3 04 01 06 00 00 01 50 30 30 30 42 6A 5A

解锁节目：A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 0B 00 A3 04 01 06 00 00 00 50 30 30 30 7F AA 5A
### 8.18 设置是否显示轮播信息命令
| 参数       | 数据长度 | 默认值 | 描述                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup   | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd        | 1        | 0x08   | 命令编号                                                     |
| Response   | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved   | 2        | 0      | 保留                                                         |
| IsDispInfo | 1        |        | 是否显示轮播信息,0x00——显示轮播信息,0x01——不显示轮播信息     |
返回 ACK 或 NACK。

实例：

不显示轮播信息命令：

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 FF 00 00 00 00 00 FE 02 06 00 A2 08 01 00 00 01 BC 51 5A

显示轮播信息命令：

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 FF 00 00 00 00 00 FE 02 06 00 A2 08 01 00 00 00 7D 91 5A

### 8.19 查询字库信息命令
| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x09   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
实例：

查询字库信息命令：

A5 A5 A5 A5 A5 A5 A5 A5 FE FF 00 80 FF 00 00 00 00 00 FE 02 05 00 A2 09 01 00 00 F0 00 5A

返回值：
| 参数        | 数据长度 | 默认值 | 描述                               |
| ----------- | -------- | ------ | ---------------------------------- |
| CmdGroup    | 1        | 0XA2   | 命令分组编号                       |
| Cmd         | 1        | 0x09   | 命令编号                           |
| CmdError    | 1        |        | 命令处理状态                       |
| FontNum     | 1        |        | 字库总个数                         |
| Font1Type   | 1        |        | 字库 1 类型：0x00——英文,0x01——中文 |
| Font1Width  | 1        |        | 字库 1 中字模宽度，单位为像素点    |
| Font1Height | 1        |        | 字库 1 中字模高度，单位为像素点    |
| ......      | ......   | ...... | ......                             |
| FontNType   | 1        |        | 字库 N 类型：0x00——英文,0x01——中文 |
| FontNWidth  | 1        |        | 字库 N 中字模宽度，单位为像素点    |
| FontNHeight | 1        |        | 字库 N 中字模高度，单位为像素点    |

### 8.20 查询字库附加信息命令
| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x10   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |


返回值：
| 参数                            | 数据长度 | 默认值 | 描述                                                         |
| ------------------------------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup                        | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd                             | 1        | 0x10   | 命令编号                                                     |
| CmdError                        | 1        |        | 命令处理状态                                                 |
| FontNum                         | 1        |        | 字库总个数                                                   |
| NumOfFontPara                   | 1        |        | 每个字库参数信息长度                                         |
| FileName                        | 4        | OXXX   | 字库1文件名第一个字节O为中英文字库标志，定义：E——英文字库；O——中文字库；K——其余外文为后面三个字节（XXX）为文件编号，ASCII码表示文件名为字符串，发送按顺序发送，如“F123”则先发送‘F’，最后发送‘3’。 |
| FileLen                         | 4        |        | 字库1文件长度                                                |
| FontWidth                       | 1        |        | 字库1中字模宽度，单位为像素点                                |
| FontHeight                      | 1        |        | 字库1中字模高度，单位为像素点                                |
| Language CRC                    | 2        |        | 字库1从Extended parameter length到 Revolving font 这10个参数的CRC校验，用于分辨新旧命令 |
| Revolving font                  | 1        | 0x00   | 字库1字体是否旋转，没有旋转为0x00，顺时针旋转90°为0x01，顺时针旋转180°为0x02，顺时针旋转270°为0x03 |
| Font tilt                       | 1        | 0x00   | 字库1字体外形，0x00表示常规，0x01表示倾斜                    |
| Font bold                       | 1        | 0x00   | 字库1字体外形，0x00表示常规，0x01表示加粗                    |
| Underline                       | 1        | 0x00   | 字库1下划线，0x00表示没有下划线，0x01表示有下划线            |
| Font file format version number | 1        | 0x01   | 字库1字库文件版本号 .0x00为老固件，0x01为新固件              |
| Language type                   | 1        |        | 字库1语言类型，英文为0，中文为1，韩文为2，法语为3，德语为4，俄语为5，日语为6，越语为7，剩余部分待添加 |
| Font type                       | 2        |        | 字库1字体类型，宋体为0（0x0000），楷体为1（0x0001），黑体为2（0x0002），仿宋为3（0x0003），微软雅黑为4（0x0004）,后续支持其他的，上位机定义好告知后增加 |
| LibData length                  | 4        |        | 字库1字库点阵文件的长度                                      |
| Font file generation time       | 8        |        | 字库文件生成时间.与版本时间格式保持一致都是8个字节           |
| Extended parameter length       | 1        | 0x12   | 字库1扩展参数长度，以字节为单位，决定扩展参数个数            |
| FontEncode                      | 1        | 0x00   | 字库1字库编码格式。0x01：GB2312编码,0x02：GBK编码,英文字库使用默认值 0x00 |
| CHK                             | 2        |        | 字库1整个文件的 CRC16 校验值                                 |
| ......                          | ......   | ...... | ......                                                       |
| NumOfFontPara                   | 1        |        | 每个字库参数信息长度                                         |
| FileName                        | 4        | OXXX   | 字库N文件名第一个字节O为中英文字库标志，定义：E——英文字库；O——中文字库；K——其余外文为后面三个字节（XXX）为文件编号，ASCII码表示文件名为字符串，发送按顺序发送，如“F123”则先发送‘F’，最后发送‘3’。 |
| FileLen                         | 4        |        | 字库N文件长度                                                |
| FontWidth                       | 1        |        | 字库N中字模宽度，单位为像素点                                |
| FontHeight                      | 1        |        | 字库N中字模高度，单位为像素点                                |
| Language CRC                    | 2        |        | 字库N从Extended parameter length到 Revolving font 这10个参数的CRC校验，用于分辨新旧命令 |
| Revolving font                  | 1        | 0x00   | 字库N字体是否旋转，没有旋转为0x00，顺时针旋转90°为0x01，顺时针旋转180°为0x02，顺时针旋转270°为0x03 |
| Font tilt                       | 1        | 0x00   | 字库N字体外形，0x00表示常规，0x01表示倾斜                    |
| Font bold                       | 1        | 0x00   | 字库N字体外形，0x00表示常规，0x01表示加粗                    |
| Underline                       | 1        | 0x00   | 字库N下划线，0x00表示没有下划线，0x01表示有下划线            |
| Font file format version number | 1        | 0x01   | 字库N字库文件版本号 .0x00为老固件，0x01为新固件              |
| Language type                   | 1        |        | 字库N语言类型，英文为0，中文为1，韩文为2，法语为3，德语为4，俄语为5，日语为6，越语为7，剩余部分待添加 |
| Font type                       | 2        |        | 字库N字体类型，宋体为0（0x0000），楷体为1（0x0001），黑体为2（0x0002），仿宋为3（0x0003），微软雅黑为4（0x0004）,后续支持其他的，上位机定义好告知后增加 |
| LibData length                  | 4        |        | 字库N字库点阵文件的长度                                      |
| Font file generation time       | 8        |        | 字库N文件生成时间.与版本时间格式保持一致都是8个字节          |
| Extended parameter length       | 1        | 0x12   | 字库N扩展参数长度，以字节为单位，决定扩展参数个数            |
| FontEncode                      | 1        | 0x00   | 字库N字库编码格式。0x01：GB2312编码,0x02：GBK编码,英文字库使用默认值 0x00 |
| CHK                             | 2        |        | 字库N整个文件的 CRC16 校验值                                 |

### 8.21 参数回读命令
| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x0A   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
返回值：
| 参数         | 数据长度 | 默认值 | 描述                                                         |
| ------------ | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup     | 1        | 0xA2   | 命令分组编号                                                 |
| Cmd          | 1        | 0x0A   | 命令编号                                                     |
| CmdError     | 1        |        | 命令处理状态                                                 |
| Reserved     | 2        |        | 保留                                                         |
| Address      | 2        | 0x0001 | 屏地址。在PHY层，广播地址定义如下：0xFFFF为广播地址1，此种模式下，控制器不返回数据，其可用于广播校时等命令。0xFFFE为广播地址2，此种模式主要用于广播设置屏参，控制器需返回数据。在返回的数据帧中，地址也应为0XFFFE。0x8000~0xDFFF地址为保留地址，对于物理层类型为TCP/IP或GPRS这种不需要处理DstAddr的，可将其目标地址设置为这个范围中的一个，默认设置地址为 0x8000。 |
| DeviceType   | 1        |        | 用于区分网络中不同的设备类型，定义如下：0x51——BX-5K1，0x58——BX-5K2，0x53——BX-5MK2，0x54——BX-5MK1 |
| Baudrate     | 1        |        | 波特率，0x00 – 保持原有波特率丌变，0x01 – 强制设置为9600，0x02 – 强制设置为57600 |
| ScreenWidth  | 2        |        | 屏幕宽度                                                     |
| ScreenHeight | 2        |        | 屏幕高度                                                     |
| Color        | 1        |        | 屏型：0x01——单色，0x02——双色                                 |
| DA           | 1        |        | 数据极性，0x00 ——数据低有效，0x01 ——数据高有效               |
| OE           | 1        |        | OE极性：0x00 ——OE低有效，0x01—— OE高有效                     |
| FreqPar      | 1        |        | CLK分频倍数                                                  |
| RowOrder     | 1        |        | 行顺序                                                       |
| MirrorMode   | 1        |        | 镜像属性：0x00 ——无镜像，0x01 ——镜像                         |
| OEAngle      | 1        |        | OE 提前角                                                    |
| ScanMode     | 1        | 0x10   | 几扫：0x10 – 1/16 扫，0x08 – 1/8 扫，0x04 –1/4扫，0x02–1/2扫，0x01 – 静态扫描 |
| ScanConfNum  | 1        |        | 扫描配置编号上位机软件需要对扫描方式编号，以方便回读         |
| LatticeMode  | 1        | 0x10   | 点阵模式0：R+G模式；点整模式1：G+R模式                       |
| Reserved     | 7        |        | 保留字节                                                     |
### 8.22 客户信息回读命令
| 参数     | 数据长度 | 默认值 | 描述                                                         |
| -------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd      | 1        | 0x0B   | 命令编号                                                     |
| Response | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved | 2        | 0      | 保留                                                         |
返回值：
| 参数      | 数据长度 | 默认值 | 描述                                                         |
| --------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup  | 1        | 0xA2   | 命令分组编号                                                 |
| Cmd       | 1        | 0x0B   | 命令编号                                                     |
| CmdError  | 1        |        | 命令处理状态                                                 |
| ClientMsg | 16       |        | 客户信息用 16 个字符表示且全部用 ASCII 表示，如： XRY，前三个字符使用 ASCII，后面 13 个字符使用 NULL 的 ASCII |
### 8.23设置提示信息
| 参数        | 数据长度 | 默认值 | 描述                                                         |
| ----------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup    | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd         | 1        | 0x0C   | 命令编号                                                     |
| Response    | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved    | 2        | 0      | 保留                                                         |
| InfoNum     | 2        |        | 提示信息个数                                                 |
| Info0Offset | 4        |        | 第一个提示信息偏移量                                         |
| ...         | ...      | ...    | ...                                                          |
| InfoNOffset | 4        |        | 第N个提示信息偏移量                                          |
| InfoNOffset | 4        |        | 第N个提示信息偏移量                                          |
| Info0Data   | N        |        | 第1个提示信息数据                                            |
| InfoNData   | N        |        | 第N个提示信息数据                                            |
返回值： ACK 或 NACK。

数据格式：
| 参数     | 数据长度 | 默认值 | 描述       |
| -------- | -------- | ------ | ---------- |
| 字节宽度 | 1        |        | W          |
| 像素宽度 | 1        |        |            |
| 像素高度 | 1        |        | H          |
| 数据     | W X H    |        | 1-0ff,0-on |
### 8.24删除提示信息
| 参数       | 数据长度 | 默认值 | 描述                                                         |
| ---------- | -------- | ------ | ------------------------------------------------------------ |
| CmdGroup   | 1        | 0XA2   | 命令分组编号                                                 |
| Cmd        | 1        | 0x0D   | 命令编号                                                     |
| Response   | 1        | 0x01   | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved   | 2        | 0      | 保留                                                         |
| DelInfoNum | 1        | 1      | 删除所有自定义提示信息                                       |

返回值： ACK 或 NACK。

### 8.25添加语音信息
| 参数                 | 数据长度 | 默认值     | 描述                                                         |
| -------------------- | -------- | ---------- | ------------------------------------------------------------ |
| CmdGroup             | 1        | 0XA2       | 命令分组编号                                                 |
| Cmd                  | 1        | 0x0E       | 命令编号                                                     |
| Response             | 1        | 0x01       | 是否要求控制器回复。0x01——控制器必须回复,0x02——控制器不必回复 |
| Reserved             | 8        | 0          | 保留                                                         |
| StoreFlag            | 1        | 0x01       | 该值为 1 表示需要存储到 FLASH 中，掉电信息不丢失；该值为 0 表示不需要存储到 FLASH 中，掉电信息丢失 |
| SoundVolum           | 1        | 0x05       | 音量该值范围是 0~10，共 11 种， 0 表示静音该值默认为 5       |
| SoundSpeed           | 1        | 0x05       | 语速该值范围是 0~10，共 11 种该值默认为 5                    |
| SoundDataMode        | 1        | 0x00       | SoundData 的编码格式：该值意义如下：0X00 GB2312；0X01 GBK；0X02 BIG5；0X03 UNICODE |
| SoundReplayTimes     | 4        | 0x00000000 | 重播次数该值为 0，表示播放 1 次该值为 1，表示播放 2 次......该值为 0xffffffff，表示播放无限次 该值默认为 0； |
| SoundReservedParaLen | 1        | 0x00       | 语音参数保留长度                                             |
| SoundReservedPara    | N        |            | 语音参数保留参数当 SoundReservedParaLen 为 0 时不发送该部分参数 |
| SoundDataLen         | 4        |            | 语音数据长度                                                 |
| SoundData            | N        |            | 语音数据                                                     |

返回值： ACK 或 NACK。


注意：该命令对所有节目均有效，主要适用于所有节目均需要播放相同的语音信息情况下，客户不需要对每个节目重复设置语音信息；或者客户发送临时语音信息，便于频繁更新语音信息。播放某个节目时，如果该节目内有语音区，同时又发送了该命令，则以该命令为准进行播放，也就是说，该命令的优先级高于节目自带语音信息。