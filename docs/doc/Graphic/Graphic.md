# 11.图文区内容编辑

字库卡由于采用字符编码的方式，可以忽略不同区域类型数据的组织方式，每个区域都可以采用相同编辑的方式。编辑区域内容时将采用一些转义字符，以构成内容的显示样式。在显示文字前必须先定义文字使用的字库或图库名、文字颜色。如果文字样式没有改变，文字将按照之前设置的方式显示。在需要更改文字样式时，也要先定义文字使用的字库或图库名、文字颜色。编辑时间区时，时间参数也采用转义字符的方式，用户可以根据需要编辑出自己想要的各种显示样式。

### 11.1  转义字符定义

| 编号 | 转义字符 | 描述                                                         |
| ---- | -------- | ------------------------------------------------------------ |
| 1    | "\FXXXX" | 字库文件名，在编辑显示文字前，必须先定义文字使用哪种字库。XXXX为文字使用的字库文件名，字库文件名的默认定义：O000——16点阵中文字库，O001——24点阵中文字库，O002——32 点阵中文字库，E000——16点阵英文字库，E001——24点阵英文字库，E002——32点阵英文字库。注意：同一个区域内不允许有不同高度的字体出现。 |
| 2    | "\TXXX"  | 图库文件名，在编辑显示图片前，必须指出图片所在的图库名。每一幅图片前都必须添加。图库文件名后紧跟图片名称，并以"丨"作为结束符，图片名最长 8 个字符。 |
| 3    | "\CX"    | 文字颜色，"X"为颜色编码，其定义如下：,0x31——表示红色;0x32——表示绿色;0x33——表示黄色;0x34——表示蓝色;0x35——表示青色;0x36——表示品红;0x37——表示白色 |
| 4    | "\DX"    | 插入日期或时间的格式，X 定义如下：'S': 秒 ，'M': 分， 'H': 时，'D': 日 ，'L': 月 ，'Y': 年， 'W':星期 |
| 5    | "\WXXXX" | 显示温度。第一个”X”为温度单位，其定义如下：‘C’:摄氏度 ‘F’:华氏度第二个”X”为数字，表示传感器类型，其定义如下：0x0——DS18B20；0x1——SHT11；第三个”X”为数字，显示温度的精度，其定义如下：‘0’:表示整数 ‘1’:表示带一位小数；例如： “\WC01”表示用 DS18B20 传感器带一位小数的摄氏度显示当前温度 |
| 6    | "\n"     | 换行符                                                       |
| 7    | “[n?]”   | 设置数字处理策略：[n0] ——自动判断；[n1] ——数字作号码处理；[n2] ——数字作数值处理 |
| 8    | “[g?]”   | 合成语种设置：[g0] ——自动判断语种；[g1] ——阿拉伯数字、度量单位、特殊符号等合成为中文；[g2] ——阿拉伯数字、度量单位、特殊符号等合成为英文 |
| 5    | “[h?]”   | 设置单词发音方式：[h0] ——自动判断单词发音方式；[h1] ——字母发音方式；[h2] ——单词发音方式 |

### 11.2  文本内容编辑
图文区可以插入文字、图片、时间参数数据，下面将举例说明图文区的显示样式和数据格式：
“\FO000\C1 上海仰邦\FE000onbon\n\FO001\C2 欢迎你”,字串中 O000 为 16点阵中文字库名，E000 为 16 点阵英文字库名，O001为24号中文字库，\C1为红色参数，\C2为绿色参数。

值得注意的是内容开始时必须设置所使用的中文或英文字库以及文字颜色，文字将按照此规则显示直至参数改变。

另外，编辑图片时，图片名以‘|’为结束符，也即图片名中不能包含有‘|’。

例如：

“\FO001\C1 上海仰邦\T000star|ABCD”，将显示汉字“上海仰邦”、图片star、字符“ABCD”。图片名最长 8 个字符。下面给出测试指令，该测试指令需将屏参设为 256*96：

先发送开始写文件命令：
A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 0E 00 A1 05 01 00 00 01 50 30 30 30 49 00 00 00 E2 16 5A

然后发送写文件命令，该实例分区为(192,0,64,64),显示内容为“www.onbonbx.com”：

A5 A5 A5 A5 A5 A5 A5 A5 01 00 00 80 00 00 00 00 00 00 FE 02 5B 01 00 A1 06 01 00 00 50 30 30 30 01 00 00 49 00 00 00 00 00 00 50 30 30 30 49 00 00 00 FF 00 00 01 FF FF 01 24 14 20 01 24 FF 00 00 01 2A 00 00 00 00 18 00 00 00 08 00 40 00 FF 00 00 00 00 00 00 00 02 02 01 00 00 0A 0F 00 00 00 77 77 77 2E 6F 6E 62 6F 6E 62 78 2E 63 6F 6D 52 4D 07 11 5A

### 11.3  时间内容编辑
通过插入时间参数的方式，客户可以编辑任意显示格式的时间，如以下字串:

“\FO000\C1 今天是\FE000\DY 年\DL 月\DD 日\n\C3\DH 时\DM 分\DS 秒”